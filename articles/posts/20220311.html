<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Convertir una imagen en caracteres con JavaScript — JAFS</title>
  <meta name="description" content="Peleándome un poco con los canvas de JavaScript, estuve viendo que era posible extraer la información de color de cada pixel. Por lo que pensé ¿y si conviert..." />
  <meta name="author" content="José Antonio Fuentes Santiago" />
  <meta name="keywords" content="José Antonio Fuentes Santiago, JAFS, TypeScript, programación" />
  <meta name="article:published_time" content="2022-03-11T19:20:29.000Z" />
  

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://jafs.github.io/articles/posts/20220311.html" />
  <meta property="og:title" content="Convertir una imagen en caracteres con JavaScript" />
  <meta property="og:description" content="Peleándome un poco con los canvas de JavaScript, estuve viendo que era posible extraer la información de color de cada pixel. Por lo que pensé ¿y si conviert..." />
  <meta property="og:site_name" content="JAFS" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:image" content="/images/ascii.png" />
  
  <meta property="article:published_time" content="2022-03-11T19:20:29.000Z" />
  
  <meta property="article:author" content="José Antonio Fuentes Santiago" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Convertir una imagen en caracteres con JavaScript" />
  <meta name="twitter:description" content="Peleándome un poco con los canvas de JavaScript, estuve viendo que era posible extraer la información de color de cada pixel. Por lo que pensé ¿y si conviert..." />
  <meta name="twitter:image" content="/images/ascii.png" />
  

  <!-- Canonical URL -->
  <link rel="canonical" href="https://jafs.github.io/articles/posts/20220311.html" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <link rel="stylesheet" href="/css/dist.css">
  <link rel="stylesheet" href="/css/github-dark.min.css">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Convertir una imagen en caracteres con JavaScript",
  "author": {
    "@type": "Person",
    "name": "José Antonio Fuentes Santiago"
  },
  "publisher": {
    "@type": "Person",
    "name": "José Antonio Fuentes Santiago"
  },
  "description": "Peleándome un poco con los canvas de JavaScript, estuve viendo que era posible extraer la información de color de cada pixel. Por lo que pensé ¿y si conviert...",
  "url": "https://jafs.github.io/articles/posts/20220311.html",
  "inLanguage": "es",
  "datePublished": "2022-03-11T19:20:29.000Z",
  "image": "/images/ascii.png"
}
  </script>

</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-black text-white py-4 shadow-md">
    <div class="max-w-4xl mx-auto px-4 flex items-center justify-between">
      <a href="/" class="text-2xl font-bold">
        <img src="/images/logo-mini.webp" alt="JAFS" class="inline-block w-8 h-8 mr-2 align-middle" />
      </a>
      <nav class="flex gap-4">
        <a href="/index.html" class="text-gray-300 hover:text-white transition-colors">Inicio</a>
        <a href="/articles/" class="text-gray-300 hover:text-white transition-colors">Artículos</a>
        <a href="/books/" class="text-gray-300 hover:text-white transition-colors">Libros</a>
        <a href="/about.html" class="text-gray-300 hover:text-white transition-colors">Sobre mí</a>
      </nav>
    </div>
  </header>
  <main class="max-w-4xl mx-auto px-4 py-8">
    <article class="prose prose-lg max-w-none bg-white rounded-lg shadow-sm p-8">
<h1 class="text-4xl font-bold mb-2">Convertir una imagen en caracteres con JavaScript</h1>
<p class="text-gray-600 text-sm mb-6">2022-03-11</p>
<p>
  Peleándome un poco con los canvas de JavaScript, estuve viendo que era posible extraer la información de color de cada pixel.
  Por lo que pensé ¿y si convierto esa información de color en un carácter? Pues dicho y hecho, en este artículo vamos a ver el
  código de un proyecto de ejemplo (del que puedes ver todo su código en <a href="https://github.com/jafs/ascii_art">Github</a>),
  y que es capaz de transformar una fotografía en un conjunto de caracteres.
</p>
<p>
  Por ejemplo, gracias a él he podido convertir una foto con muchos años en la que salimos mi hermana y yo, en lo siguiente:
</p>
<p><img src="/images/ascii.png" alt="Ejemplo"></p>
<p>
  Además, es posible escoger un conjunto personalizado de caracteres, así como el número de caracteres utilizado como ancho y
  como alto de la imagen convertida. Pero, dejo de enrollarme y pasamos a ver cómo funciona todo esto.
</p>

<h2>Dentro del código</h2>
<p>
  El código está escrito en TypeScript, pero no es complicado, por lo que cualquier persona debería poder comprender qué es
  lo que hace.
</p>
<p>
  Comenzaremos por la parte de más bajo nivel. Lo primero que necesitamos es una de las varias fórmulas que hay para convertir
  los colores RGB a un tono de gris, para ello tenemos la función siguiente:
</p>
<pre><code class="language-typescript">function rgbToGray(red: number, green: number, blue: number): number {
  // Fórmula: https://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale
  return 0.299 * red + 0.587 * green + 0.114 * blue;
}</code></pre>
<p>
  Esta función la utilizaremos en otra en la que obtendremos el tono de gris de un pixel en concreto dentro de un canvas:
</p>
<pre><code class="language-typescript">function pixelToGrayValue(context: CanvasRenderingContext2D, x: number, y: number): number {
  const pixelInformation = context.getImageData(x, y, 1, 1).data;
  return rgbToGray(pixelInformation[0], pixelInformation[1], pixelInformation[2]);
}</code></pre>

<p>
  Seguimos subiendo otro nivel, y ahora lo que vamos a ver es la función que hace el trabajo de convertir todos los píxeles de
  un canvas a letras. Para ello incluyo comentarios en el código que os puedan ayudar a la comprensión:
</p>
<pre><code class="language-typescript">// Representa el número de tonos de gris posibles por cada porción RGB.
const GRAY_RANGE: number = 256;

function canvasToString(canvas: HTMLCanvasElement, characters: string[]): string {
  // Lo primero que necesitamos del canvas es su contexto para poder leer la
  // información, así como su ancho y alto, que utilizaremos para hacer el
  // recorrido pixel a pixel.
  const context: CanvasRenderingContext2D = canvas.getContext(&quot;2d&quot;);
  const { width, height } = canvas;

  // En la variable range, almacenaremos el número de tonos grises que albergará
  // cada carácter.
  const range: number = GRAY_RANGE / characters.length;

  let text: string = &quot;&quot;;

  // Un recorrido sencillo línea a línea y luego columna a columna. Seguramente
  // estarás pensando que tener dos niveles de indentación en una función no es
  // buena idea. Pero al final esto es un ejemplo :P
  for (let y = 0; y &amp;lt; height; ++y) {
    for (let x = 0; x &amp;lt; width; ++x) {
      // Obtenermos el tono de gris que corresponde al pixel actual.
      const grayValue: number = pixelToGrayValue(context, x, y);

      // Aquí buscamos el carácter que tocaría mostrar según el tono de gris.
      text += characters[Math.floor(grayValue / range)];
    }

    // Al final de cada línea añadimos una nueva.
    text += &quot;\n&quot;;
  }

  return text;
}</code></pre>
<blockquote>
<p>
  La función anterior es la que realiza todo el trabajo, y espero haber incluido comentarios descriptivos que os hayan podido ayudar
  a comprenderla. De todas formas, para cualquier duda podéis escribir en los comentarios.
</p>
</blockquote>
<p>
  Para terminar tenemos otras tres funciones que se encargan de obtener el canvas que usaremos para pintar la imagen temporalmente
  antes de convertirla:
</p>
<pre><code class="language-typescript">export function imageToString(
  imageElement: HTMLImageElement, columns: number, rows: number,
  charactersList: string[] = DEFAULT_CHARACTERS
): string {
  // Creamos un canvas donde guardaremos la imagen.
  const canvas: HTMLCanvasElement = createCanvas(columns, rows);

  // &quot;Pintamos&quot; la imagen en el canvas.
  loadImageOnCanvas(canvas, imageElement);

  // Convertimos los pixels del canvas en caracters (como vimos antes).
  const asciiImage: string = canvasToString(canvas, charactersList)

  // Es importante borrar la basurilla que vamos creando.
  canvas.remove();

  return asciiImage;
}

// Esta función no tiene mucho misterior, pues simplemente crea un canvas con las
// dimensiones especificadas.
function createCanvas(width: number, height: number): HTMLCanvasElement {
  const canvas: HTMLCanvasElement = document.createElement(&quot;canvas&quot;);

  canvas.width = width;
  canvas.height = height;

  return canvas;
}

// Carga un elemento &amp;lt;img /&gt; en el canvas.
function loadImageOnCanvas(canvas: HTMLCanvasElement, imageElement: HTMLImageElement): void {
  const context = canvas.getContext(&quot;2d&quot;);
  context.drawImage(imageElement, 0, 0, canvas.width, canvas.height);
}
</code></pre>
<p>
  Resumiendo, lo que hemos hecho primero es volcar una imagen cualquiera a un elemento canvas. Y dicho elemento lo hemos aprovechado para
  leer cada pixel y así convertirlo primero a un tono de gris, y de ahí, luego lo hemos convertido a un carácter.
</p>
<p>
  Como conjunto de caracteres base, la función usa los siguientes si no se define ninguno:
</p>
<pre><code class="language-typescript">const DEFAULT_CHARACTERS: string[] = [&quot;@&quot;, &quot;M&quot;, &quot;#&quot;, &quot;A&quot;, &quot;3&quot;, &quot;?&quot;, &quot;*&quot;, &quot;-&quot;, &quot; &quot;];</code></pre>
<p>
  Estos vendrán ordenados del que represente tonos más oscuros, a tonos más claros.
</p>

<h2>De regalo...</h2>
<p>
  Como extra, parte del código anterior podría servirnos para hacer una copia en blanco y negro de una imagen. Para ello, podemos crear un 
  canvas con las mismas dimensiones y por cada pixel podríamos hacer lo siguiente:
</p>
<pre><code class="language-typescript">function canvasToString(canvas: HTMLCanvasElement, characters: string[]): string {
...
  // Si volvemos a la parte en la que obteníamos el tono de gris:
  const grayValue: number = pixelToGrayValue(context, x, y);
  // Podemos ahora convertir a un hexadecimal el tono:
  const hexColor = toHexadecimalString(grayValue);
  // Para finalmente pintar el píxel en el contexto del canvas &quot;copia&quot;:
  drawPixel(contextCopy, x, y, &quot;#&quot; + hexColor + hexColor + hexColor);
  ...
}

// Este método tan sólo pinta un píxel en un canvas.
function drawPixel(context, x, y, color) {
  context.beginPath();
  context.fillStyle = color;
  context.fillRect(x, y, 1, 1);
  context.fill();
}

// Este método convierte el tono de gris (puede tener decimales de ahí el Math.floor), a
// un valor hexadecimal. Si queda con unidades le añade el &quot;0&quot; de decenas.
function toHexadecimalString(value) {
  const roundedValue = Math.floor(value);
  const stringValue = roundedValue.toString(16);

  if (stringValue.length === 1) {
    return &quot;0&quot; + stringValue;
  }

  return stringValue;
}</code></pre>

<h2>En conclusión</h2>
<p>
  Espero que este código te haya servido como curiosidad, y estás invitados a sugerir cualquier mejora o avisar de cualquier error en
  cualquiera de mis redes. También puedes trastear con el código, probar vuestros propios ajustes de caracteres, etc.
</p>

    </article>
  </main>
  <footer class="bg-black text-white py-4 mt-12">
    <div class="max-w-4xl mx-auto px-4 flex flex-col items-center gap-4">
      <div class="flex gap-4">
        <a href="https://www.linkedin.com/in/joseafs/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="LinkedIn">
          <img src="/images/linkedin.svg" alt="LinkedIn" class="w-6 h-6" />
        </a>
        <a href="https://www.instagram.com/jafs_developer/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="Instagram">
          <img src="/images/instagram.svg" alt="Instagram" class="w-6 h-6" />
        </a>
      </div>
      <div class="text-center">© 2025 — José Antonio Fuentes Santiago</div>
    </div>
  </footer>
  <script src="/js/highlight.min.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>