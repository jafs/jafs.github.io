<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Testing y TDD ‚Äî JAFS</title>
  <meta name="description" content="A d√≠a de hoy, muchas veces el software falla porque lo programan personas, por lo que es factible que tenga errores. As√≠ que como desarrolladores y desarroll..." />
  <meta name="author" content="Jos√© Antonio Fuentes Santiago" />
  <meta name="keywords" content="Jos√© Antonio Fuentes Santiago, JAFS, testing, TDD" />
  <meta name="article:published_time" content="2022-12-11T17:59:11.000Z" />
  

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://jafs.github.io/articles/posts/20221211.html" />
  <meta property="og:title" content="Testing y TDD" />
  <meta property="og:description" content="A d√≠a de hoy, muchas veces el software falla porque lo programan personas, por lo que es factible que tenga errores. As√≠ que como desarrolladores y desarroll..." />
  <meta property="og:site_name" content="JAFS" />
  <meta property="og:locale" content="es_ES" />
  
  <meta property="article:published_time" content="2022-12-11T17:59:11.000Z" />
  
  <meta property="article:author" content="Jos√© Antonio Fuentes Santiago" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Testing y TDD" />
  <meta name="twitter:description" content="A d√≠a de hoy, muchas veces el software falla porque lo programan personas, por lo que es factible que tenga errores. As√≠ que como desarrolladores y desarroll..." />
  

  <!-- Canonical URL -->
  <link rel="canonical" href="https://jafs.github.io/articles/posts/20221211.html" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <link rel="stylesheet" href="/css/dist.css">
  <link rel="stylesheet" href="/css/github-dark.min.css">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Testing y TDD",
  "author": {
    "@type": "Person",
    "name": "Jos√© Antonio Fuentes Santiago"
  },
  "publisher": {
    "@type": "Person",
    "name": "Jos√© Antonio Fuentes Santiago"
  },
  "description": "A d√≠a de hoy, muchas veces el software falla porque lo programan personas, por lo que es factible que tenga errores. As√≠ que como desarrolladores y desarroll...",
  "url": "https://jafs.github.io/articles/posts/20221211.html",
  "inLanguage": "es",
  "datePublished": "2022-12-11T17:59:11.000Z"
}
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-black text-white py-4 shadow-md">
    <div class="max-w-4xl mx-auto px-4 flex items-center justify-between">
      <a href="/" class="text-2xl font-bold">
        <img src="/images/logo-mini.webp" alt="JAFS" class="inline-block w-8 h-8 mr-2 align-middle" />
      </a>
      <div class="flex items-center gap-4">
        <nav class="flex gap-4">
          <a href="/index.html" class="text-gray-300 hover:text-white transition-colors">Inicio</a>
          <a href="/articles/" class="text-gray-300 hover:text-white transition-colors">Art√≠culos</a>
          <a href="/books/" class="text-gray-300 hover:text-white transition-colors">Libros</a>
          <a href="/about.html" class="text-gray-300 hover:text-white transition-colors">Sobre m√≠</a>
        </nav>
        <form action="/search.html" method="get">
          <input type="search" name="q" placeholder="Buscar..." class="px-3 py-2 rounded bg-gray-800 text-white text-sm placeholder-gray-400 border border-gray-700 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 w-40" aria-label="Buscar art√≠culos" />
        </form>
      </div>
    </div>
  </header>
  <main class="max-w-4xl mx-auto px-4 py-8">
    <article class="prose prose-lg max-w-none bg-white rounded-lg shadow-sm p-8">
      <h1 class="text-4xl font-bold mb-2">Testing y TDD</h1><p class="text-gray-600 text-sm mb-6">2022-12-11</p><h2 id="tests">Tests</h2>
<p>A d√≠a de hoy, muchas veces el software falla porque lo programan personas, por lo que es factible que tenga errores. As√≠ que como desarrolladores y desarrolladoras, debemos siempre intentar minimizar esos fallos. Para ello disponemos de varias herramientas, y una de las m√°s √∫tiles son los tests. Estos pueden ser autom√°ticos o manuales.</p>
<p>Si hablamos de la vertiente autom√°tica, se puede definir un test como un bloque de c√≥digo que permite aseverar el cumplimiento de determinadas afirmaciones. A su vez, cada afirmaci√≥n viene dada por una sentencia, en la que un m√©todo o una funci√≥n comprueban si un valor cumple con las expectativas.</p>
<h3 id="¬øc√≥mo-deber√≠an-ser-los-tests">¬øC√≥mo deber√≠an ser los tests?</h3>
<p>A la hora de testear podemos seguir algunas directrices:</p>
<ul>
<li><strong>Confianza en el c√≥digo</strong>: Es importante que pruebes todo lo que sea necesario para tener confianza en el c√≥digo desarrollado. No significa que se deba probar hasta el m√°s m√≠nimo resquicio, sino que pruebes todos los <em>comportamientos</em> que se esperan.</li>
<li><strong>Reducir el c√≥digo malo</strong>: Usa los tests para reducir en la medida de lo posible el mal c√≥digo. Por ejemplo, si surge un error, deber√≠as crear un test que asegure que √©ste problema no se vaya a repetir en el futuro. Adem√°s, estos nuevos tests te ayudar√°n a documentar el error.</li>
<li><strong>Prueba una cosa, afirma varias</strong>: Incluye todas las afirmaciones que sean necesarias en un test. Lo importante es asegurarnos de que todas las partes afectadas por el test tengan los datos correctos.</li>
<li><strong>Los tests primero</strong>: Deber√≠as definir los tests a realizar antes de programar. Esto significa que es buena idea pensar el enunciado de los tests, para tener una visi√≥n global de la funcionalidad a desarrollar. Adem√°s, ayudar√° a entender mejor que se debe hacer.</li>
<li><strong>Ejecuta los tests</strong>: Parece una obviedad, pero es muy importante que una vez que exista un test se ejecute siempre. Por ejemplo, los tests unitarios deber√≠as ejecutarlos al menos, antes de hacer un commit y antes de hacer un deploy a un entorno de test.</li>
<li><strong>Lanzar los tests necesarios en los momentos necesarios</strong>: Es importante que aprendas a ejecutar un subconjunto de tests unitarios, ya que aunque los tests sean r√°pidos por si s√≥los, en cuanto haya unos cientos, el tiempo de ejecuci√≥n total puede ser bastante alto. Es por ello, que mientras desarrollas debes saber como poder ejecutar s√≥lo los tests que est√©s modificando, para ahorrar tiempo. Esto no quita que, de vez en cuando, ejecutes toda la suite de tests para asegurarte de que todo sigue en su sitio.</li>
<li><strong>Automatiza la ejecuci√≥n de tests</strong>: A d√≠a de hoy resulta casi impensable que haya un sistema de CI/CD (Integraci√≥n continua, despliegue cont√≠nuo), que durante el proceso no ejecute los tests, ya sean unitarios, de integraci√≥n, etc.</li>
<li><strong>Tests en las revisiones</strong>: Es buena idea comenzar a ver los casos de tests que has creado en las revisiones de c√≥digo. Por un lado, junto con la definici√≥n de la historia, puede ayudar a quienes van a revisar el c√≥digo a entender si se cumple el <em>comportamiento</em> de la funcionalidad desarrollada. Por otro, seguro que te obliga a revisar mejor los tests antes de ense√±arlos a otras personas. Y si no haces revisiones de c√≥digo, deber√≠as comenzar cuanto antes &#x1f609;.</li>
</ul>
<h3 id="nomenclatura-de-los-tests">Nomenclatura de los tests</h3>
<p>Una de las primeras recomendaciones al escribir el nombre de los tests, es comenzar a utilizar la palabra &quot;should&quot; (&quot;deber√≠a&quot; en castellano). Puede parecer una tonter√≠a, pero su sem√°ntica nos puede ayudar a entender el por qu√©: cuando indicamos, por ejemplo, un nombre del estilo &quot;deber√≠a hacer X cuando Y&quot;, √©ste ya nos est√° ayudando a pensar si realmente esa funcionalidad es del componente a testear. Incluso si a futuro la funcionalidad ha cambiado, tendr√° todo el sentido del mundo ver que el nombre del test nos &quot;pregunte&quot; si deber√≠a seguir ocurriendo lo que hac√≠a.</p>
<p>Si vemos que no se puede escribir un test bajo esa premisa, quiz√°s sea porque √©ste deber√≠a pertenecer a otro elemento en el c√≥digo: una clase nueva, otra funci√≥n, etc.</p>
<p>Y es que a la hora de redactar pruebas, se comprueba como un test con un buen nombre brilla en los momentos en los que √©ste falla. Si el nombre no te aporta nada cuando el test falla, debes darle una vuelta para mejorarlo.</p>
<p>Pensemos por ejemplo en la t√≠pica funcionalidad que nos env√≠a un correo de confirmaci√≥n al cambiar nuestra contrase√±a. Si tengo una clase que gestiona la autenticaci√≥n de usuario, no tiene sentido tener un test: &quot;deber√≠a autenticarme con el usuario X, acceder a su configuraci√≥n, cambiar la contrase√±a y recibir un email de confirmaci√≥n&quot;. Con esto, vemos por ejemplo, como el nombre del test nos da la pista de que esa clase est√° haciendo demasiadas cosas, lo que incumple la <a href="/articles/posts/20220107.html">S de los principios SOLID</a>, llev√°ndonos a liberarla de responsabilidades.</p>
<h3 id="flujo-de-test-en-cuatro-fases">Flujo de test en cuatro fases</h3>
<p>A la hora de escribir tus pruebas viene bien seguir el patr√≥n de <a href="http://xunitpatterns.com/Four%20Phase%20Test.html">test en cuatro fases</a>, que nos define qu√© flujo de ejecuci√≥n deber√≠a seguir cada test:</p>
<ul>
<li><strong>Setup</strong>: fase en la que se construye todo lo necesario para que el test tenga listo el entorno de su ejecuci√≥n.</li>
<li><strong>Exercise</strong>: pasos para que el test se ejecute. Por ejemplo: instanciar una clase y llamar a varios de sus m√©todos.</li>
<li><strong>Verify</strong>: comprobaci√≥n del resultado esperado tras ejecutar los pasos de Exercise.</li></li>
<li><strong>Teardown</strong>: fase opcional en la que se restaura todo lo modificado por el test. Normalmente, esto aplicar√° m√°s a estructuras compartidas globalmente, mocks est√°ticos, etc.</li>
</ul>
<h2 id="tdd">TDD</h2>
<p>A finales de los 90 del siglo pasado <a href="https://www.kentbeck.com/">Kent Beck</a>, como parte de Extreme Programming, desarroll√≥ y especific√≥ la t√©cnica TDD (Test-Driven Development o Desarrollo Guiado por Test). B√°sicamente, se basa en construir el software a trav√©s de la escritura de tests, definiendo tres sencillos pasos a seguir basados en los colores de los sem√°foros:</p>
<pre><code class="language-text">üî¥ Fase roja: escribir un test para la pr√≥xima funcionalidad a a√±adir (inicialmente fallar√°).
üü¢ Fase verde: desarrollar la funcionalidad con el c√≥digo m√°s simple que haga que el test pase.
üü† Fase √°mbar: refactorizar el c√≥digo hasta que est√© bien estructurado.
</code></pre>
<p><img src="/images/TDD.webp" alt="Diagrama TDD"></p>
<h3 id="beneficios-de-tdd">Beneficios de TDD</h3>
<p>TDD pone el foco en el <strong>comportamiento</strong> (recordad esta palabra) del c√≥digo y no en su implementaci√≥n, puesto que al desarrollar con TDD se escribe cada test antes de su correspondiente c√≥digo de producci√≥n.</p>
<p>Seguir esta orientaci√≥n en el desarrollo te proporciona varios beneficios:</p>
<ul>
<li>Vas a escribir c√≥digo como respuesta a que un test pase. Esto significa que el c√≥digo va a estar bien testeado y el c√≥digo no har√° m√°s de lo que debe.</li>
<li>El segundo es que este planteamiento te har√° pensar primero en la interfaz del c√≥digo, antes de que en su implementaci√≥n. Lo que te ayudar√° a tener mejor estructurado el c√≥digo y s√≥lo hacer p√∫blico lo que sea necesario.</li>
<li>Finalmente, como resultado a los dos beneficios anteriores, tenemos un c√≥digo con menos errores. Y es que en el estudio &quot;Does Test-Driven Development Really Improve Software Design Quality?&quot; de David S. Janzen y Hossein Saiedian, ya se indica como con TDD se reduce sustancialmente el n√∫mero de errores que aparecen en el software al aplicar la t√©cnica.</li>
</ul>
<h2 id="flujo-de-desarrollo-en-tdd">Flujo de desarrollo en TDD</h2>
<ul>
<li><strong>Momento de pensar</strong>: por desgracia es la fase m√°s olvidada en los flujos de desarrollo, y es que antes de escribir una s√≥la l√≠nea de c√≥digo, habr√≠a que detenerse a pensar cu√°l es el objetivo del c√≥digo que vamos a desarrollar, que posibles restricciones o casos especiales hay, etc. Todo esto nos ayudar√° a tener un esquema del comportamiento esperado para la funcionalidad a crear, y evitar√° los cambios de √∫ltima hora porque no tuvimos en cuenta el alcance de lo que se quer√≠a desarrollar.</li>
<li><strong>Escribe el primer test</strong>: una vez que tenemos claro el objetivo a conseguir. Escribiremos el primer test... S√≠, a√∫n no hay nada de c√≥digo, pero el test usar√° la interfaz que nos gustar√≠a crear, esto te ayudar√° a pensar no en la implementaci√≥n del c√≥digo, sino en la interfaz que como &quot;agente externo&quot; te gustar√≠a usar. Este primer test, como es l√≥gico, va a fallar.</li>
<li><strong>Hora de programar</strong>: ahora es el momento de implementar el esqueleto que usaste en el test, hasta hacer que √©ste pase.</li>
<li><strong>Refactoriza</strong>: una vez que los tests de la funcionalidad que quer√≠as desarrollar se ejecuten correctamente, es el momento de revisar y refactorizar el c√≥digo para que quede lo mejor posible. Sobra decir, que tras refactorizar, los tests deben seguir terminando de forma satisfactoria. Eso s√≠, lim√≠tate a refactorizar el c√≥digo actual, no pienses en futuras mejoras (que puede que nunca lleguen), recuerda que refactorizar no significa cambiar el comportamiento del c√≥digo.</li>
<li><strong>Volver a la casilla de salida</strong>: cuando tengas una nueva funcionalidad, tan s√≥lo tendr√°s que repetir los pasos.</li>
</ul>
<p>La clave principal de este flujo de desarrollo, es realizar peque√±os cambios de forma incremental. Por lo que en todo momento, se espera que el c√≥digo escrito est√© bien testeado.</p>
<h2 id="legacy-code-y-tdd">Legacy code y TDD</h2>
<p>TDD no s√≥lo sirve para desarrollos nuevos. En el caso de tener que modificar legacy code (c√≥digo antiguo u obsoleto y que normalmente no tendr√° tests), TDD nos permitir√° seguir un flujo que ayude a comprobar este c√≥digo.</p>
<ul>
<li>Primero escribiremos los tests para verificar que se comprueba lo que hace el c√≥digo antiguo.</li>
<li>Una vez que tenemos los tests, ya podemos comenzar a a√±adir o corregir las funcionalidades.</li>
<li>Si es una nueva funcionalidad seguiremos el flujo habitual.</li>
<li>En caso de que se vaya a corregir un comportamiento err√≥neo, se partir√° por retocar el test que se hizo pasar con el comportamiento err√≥neo, para adaptarlo a la correcci√≥n. A partir de ah√≠, el test fallar√° y ya podremos comenzar con nuestro ciclo TDD habitual.</li>
</ul>
<h2 id="conclusiones">Conclusiones</h2>
<p>TDD plantea muchas ventajas a la hora de desarrollar:</p>
<ul>
<li>Permite pensar primero antes de escribir una sola l√≠nea de c√≥digo.</li>
<li>Ayuda a definir una interfaz √∫til basada en lo que es necesario.</li>
<li>Permite reducir sustancialmente el n√∫mero de errores.</li>
<li>Mejora la mantenibilidad del software.</li>
</ul>
<p>Por contra, su mayor inconveniente es el coste de acostumbrarse a aplicarlo. Por lo que inicialmente desarrollar√°s m√°s lento. Pero a la larga, aparte de mejorar en velocidad, podr√°s comprobar como el tiempo de desarrollo global se reduce, puesto que estar√°s introduciendo menos errores en el c√≥digo, de forma que no se perder√° tanto tiempo en mantenerlo.</p>
<p>Una vez que conocemos los conceptos de TDD, el siguiente paso ser√° ir a por BDD...</p>

    </article>
  </main>
  <footer class="bg-black text-white py-4 mt-12">
    <div class="max-w-4xl mx-auto px-4 flex flex-col items-center gap-4">
      <div class="flex gap-4">
        <a href="https://www.linkedin.com/in/joseafs/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="LinkedIn">
          <img src="/images/linkedin.svg" alt="LinkedIn" class="w-6 h-6" />
        </a>
        <a href="https://www.instagram.com/jafs_developer/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="Instagram">
          <img src="/images/instagram.svg" alt="Instagram" class="w-6 h-6" />
        </a>
      </div>
      <div class="text-center">¬© 2025 ‚Äî Jos√© Antonio Fuentes Santiago</div>
    </div>
  </footer>
  <script src="/js/highlight.min.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>