<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Comunicando pestañas del navegador con localStorage — JAFS</title>
  <meta name="description" content="Hay mucha gente que me ha preguntado en ocasiones si sería posible tener comunicación entre dos pestañas del navegador. Y la respuesta es sí, pero siempre qu..." />
  <meta name="author" content="José Antonio Fuentes Santiago" />
  <meta name="keywords" content="José Antonio Fuentes Santiago, JAFS, programación, JavaScript, web" />
  <meta name="article:published_time" content="2021-05-24T18:00:00.000Z" />
  

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://jafs.github.io/articles/posts/20210524.html" />
  <meta property="og:title" content="Comunicando pestañas del navegador con localStorage" />
  <meta property="og:description" content="Hay mucha gente que me ha preguntado en ocasiones si sería posible tener comunicación entre dos pestañas del navegador. Y la respuesta es sí, pero siempre qu..." />
  <meta property="og:site_name" content="JAFS" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:image" content="/images/javascript.png" />
  
  <meta property="article:published_time" content="2021-05-24T18:00:00.000Z" />
  
  <meta property="article:author" content="José Antonio Fuentes Santiago" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Comunicando pestañas del navegador con localStorage" />
  <meta name="twitter:description" content="Hay mucha gente que me ha preguntado en ocasiones si sería posible tener comunicación entre dos pestañas del navegador. Y la respuesta es sí, pero siempre qu..." />
  <meta name="twitter:image" content="/images/javascript.png" />
  

  <!-- Canonical URL -->
  <link rel="canonical" href="https://jafs.github.io/articles/posts/20210524.html" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <link rel="stylesheet" href="/css/dist.css">
  <link rel="stylesheet" href="/css/github-dark.min.css">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Comunicando pestañas del navegador con localStorage",
  "author": {
    "@type": "Person",
    "name": "José Antonio Fuentes Santiago"
  },
  "publisher": {
    "@type": "Person",
    "name": "José Antonio Fuentes Santiago"
  },
  "description": "Hay mucha gente que me ha preguntado en ocasiones si sería posible tener comunicación entre dos pestañas del navegador. Y la respuesta es sí, pero siempre qu...",
  "url": "https://jafs.github.io/articles/posts/20210524.html",
  "inLanguage": "es",
  "datePublished": "2021-05-24T18:00:00.000Z",
  "image": "/images/javascript.png"
}
  </script>

</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-black text-white py-4 shadow-md">
    <div class="max-w-4xl mx-auto px-4 flex items-center justify-between">
      <a href="/" class="text-2xl font-bold">
        <img src="/images/logo-mini.webp" alt="JAFS" class="inline-block w-8 h-8 mr-2 align-middle" />
      </a>
      <div class="flex items-center gap-4">
        <nav class="flex gap-4">
          <a href="/index.html" class="text-gray-300 hover:text-white transition-colors">Inicio</a>
          <a href="/articles/" class="text-gray-300 hover:text-white transition-colors">Artículos</a>
          <a href="/books/" class="text-gray-300 hover:text-white transition-colors">Libros</a>
          <a href="/about.html" class="text-gray-300 hover:text-white transition-colors">Sobre mí</a>
        </nav>
        <form action="/search.html" method="get">
          <input type="search" name="q" placeholder="Buscar..." class="px-3 py-2 rounded bg-gray-800 text-white text-sm placeholder-gray-400 border border-gray-700 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 w-40" aria-label="Buscar artículos" />
        </form>
      </div>
    </div>
  </header>
  <main class="max-w-4xl mx-auto px-4 py-8">
    <article class="prose prose-lg max-w-none bg-white rounded-lg shadow-sm p-8">
      <h1 class="text-4xl font-bold mb-2">Comunicando pestañas del navegador con localStorage</h1><p class="text-gray-600 text-sm mb-6">24-05-2021</p><p>Hay mucha gente que me ha preguntado en ocasiones si sería posible tener comunicación entre dos pestañas del navegador. Y la respuesta es sí, pero siempre que pertenezcan a un mismo host. Para ello utilizaremos un pequeño &quot;truco&quot;, y es que jugaremos con el objeto <a href="https://developer.mozilla.org/es/docs/Web/API/Window/localStorage"><code>localStorage</code></a>.</p>
<p>Como explicación breve, <code>localStorage</code> es un atributo del objeto window. Y gracias a él, podremos persistir diferentes datos en el navegador. De forma, que dichos datos persistan incluso cuando se cierre el navegador. Para almacenarlos, se utiliza con el sistema clave / valor.</p>
<p>Como breve inciso, su hermano <code>sessionStorage</code>, hace lo mismo, pero con cada sesión del navegador, es decir, una vez cerremos la pestaña o cambiemos de página, se borrarán todos los datos. Además, si tenemos dos o más pestañas abiertas de un mismo host de forma simultánea, cada una tendrá su propio <code>sessionStorage</code>.</p>
<p>Si os interesa que hable más de este tema, avisadme en los comentarios y preparo un tutorial para explicar el funcionamiento de los Storages en JavaScript.</p>
<p>Pues bien, volviendo al tema; si tenemos en cuenta que, por así decirlo, sólo hay un <code>localStorage</code> por host. Podemos jugar con éste, para preparar un sistema de mensajería inter-pestaña.</p>
<p>Por un lado tendríamos nuestra función emisora:</p>
<pre><code class="language-javascript">function sendMessage(messageId, messageContent) {
  localStorage.setItem(messageId, messageContent);
}

sendMessage(&quot;shoppingCartMessage&quot;, &quot;Element added&quot;);
</code></pre>
<p>Por otro, la función receptora:</p>
<pre><code class="language-javascript">const messageId = &quot;shoppingCartMessage&quot;;

window.addEventListener(&quot;message&quot;, function onMessage(event) {
    if (event.key === messageId &amp;amp;&amp;amp; event.newValue) {
        console.log(&quot;Recibido el mensaje: &quot; + event.newValue;
    }
});
</code></pre>
<p>Ahora pasemos a ver un poco lo que hace cada función.</p>
<p>Por un lado la emisora, simplemente guarda en localStorage un mensaje con un identificador. Por otro, el receptor, define un manejador de eventos, para recibir aquellos que son de tipo &quot;<strong>message</strong>&quot;. Este manejador sólo será notificado cuando otra pestaña realice cambios en el localStorage. Es decir, sólo se nos notificará cuando otra pestaña cambie algo en el localStorage de nuestro host. Los cambios en el sessionStorage no son notificados por este evento.</p>
<p>Creo que cabe decir, que lo que usemos como <code>messageId</code> en ambos lados, debe ser igual.</p>
<p>Pues bien, con tan poquitas líneas y gracias al juego del evento &quot;message&quot;, podemos tener mensajería sencilla entre pestañas. El flujo será:</p>
<ul>
<li>El emisor guarda el mensaje en localStorage con una clave definida.</li>
<li>El receptor, recibe la notificación de cambio en el Storage. Pasa a comprobar si el ítem modificado es el esperado. Y si es así, y tiene contenido el mensaje, pasaría a seguir con el comportamiento esperado.</li>
</ul>
<p>Como extra, la emisora podría dejar vacío nuevamente el campo del mensaje, por si en algún otra sección del código de la parte receptora necesitara mirar la clave.</p>

    </article>
  </main>
  <footer class="bg-black text-white py-4 mt-12">
    <div class="max-w-4xl mx-auto px-4 flex flex-col items-center gap-4">
      <div class="flex gap-4">
        <a href="https://www.linkedin.com/in/joseafs/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="LinkedIn">
          <img src="/images/linkedin.svg" alt="LinkedIn" class="w-6 h-6" />
        </a>
        <a href="https://www.youtube.com/@jafsdeveloper" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="YouTube">
          <img src="/images/youtube.svg" alt="YouTube" class="w-6 h-6" />
        </a>
        <a href="https://www.instagram.com/jafs_developer/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="Instagram">
          <img src="/images/instagram.svg" alt="Instagram" class="w-6 h-6" />
        </a>
      </div>
      <div class="text-center">© 2025 — José Antonio Fuentes Santiago</div>
    </div>
  </footer>
  <script src="/js/highlight.min.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>